{% extends "base.html" %}
{% load crispy_forms_tags %}
{% load static %}

{% block content %}


{% if user.is_authenticated %}
<div class="container d-flex justify-content-center" style="height: 10vh;">
        <div class="card bg-light mb-3 my-auto" style="max-width: 55vw;">
            <div class="card-header">Adicionar processo</div>
            <div class="card-body">
                    <form method="POST" autocomplete="off" id="js-form" data-busca-doencas="{% url 'busca-doencas' %}" data-busca-pacientes="{% url 'busca-pacientes'%}">
                        {% csrf_token %}
                        <div class="form-row ">
                            <div class="col-sm-6"> CPF paciente<br>{{ formulario.cpf_paciente|as_crispy_field }} </div>
                            <div class="col-sm-3"> Doença<br>{{ formulario.cid|as_crispy_field }} </div>
                            <div class="col-sm-3"><br><button class="btn btn-dark" type="submit">Cadastrar</button></div>
                    </form>
            </div>
            <div>
                <ul class="list-group resultados" id="resultados"></ul>
                <ul class="list-group resultados" id="pacientes"></ul>
            </div>
        </div>     
</div>
    
    {% else %}
    <div class="container text-center my-5">
        <div class="jumbotron bg-white shadow-sm rounded-lg p-5">
            <h1 class="display-4 text-primary-color">Simplifique Prescrições de Alto Custo</h1>
            <p class="lead text-secondary">Agilidade e precisão para médicos e clínicas na emissão de receitas de medicamentos especiais.</p>
            <hr class="my-4">
            <p>Otimize seu tempo e garanta a conformidade com a legislação, focando no que realmente importa: o cuidado com o paciente.</p>
            <a class="btn btn-primary btn-lg mt-3" href="#solicitar-convite" role="button">Solicite seu Convite Agora</a>
        </div>

        <div class="row my-5">
            <div class="col-md-4">
                <div class="card h-100">
                    <div class="card-body">
                        <h3 class="card-title text-primary-color">Rapidez Incomparável</h3>
                        <p class="card-text">Emita prescrições complexas em minutos, não horas. Nosso sistema automatiza o preenchimento e a validação.</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card h-100">
                    <div class="card-body">
                        <h3 class="card-title text-primary-color">Precisão e Conformidade</h3>
                        <p class="card-text">Reduza erros com validação automática e mantenha-se atualizado com as regulamentações de medicamentos de alto custo.</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card h-100">
                    <div class="card-body">
                        <h3 class="card-title text-primary-color">Gestão Simplificada</h3>
                        <p class="card-text">Gerencie pacientes e históricos de prescrições de forma eficiente, com acesso rápido a todas as informações.</p>
                    </div>
                </div>
            </div>
        </div>

        <div id="solicitar-convite" class="card p-4 my-5 shadow-sm">
            <h2 class="text-primary-color mb-4">Já possui um Código de Convite?</h2>
            <p class="lead">Insira seu código abaixo para acessar a plataforma e começar a otimizar suas prescrições.</p>
            <form method="POST" class="form-inline justify-content-center">
                {% csrf_token %}
                <div class="form-group mx-sm-3 mb-2">
                    <label for="convite" class="sr-only">Código de Convite</label>
                    <input type="text" class="form-control" id="convite" name="convite" placeholder="Seu Código de Convite">
                </div>
                <button type="submit" class="btn btn-primary mb-2">Acessar</button>
            </form>
            <p class="mt-3">Ainda não tem um código? <a href="#">Entre em contato para solicitar acesso.</a></p>
        </div>
    </div>
    {% endif %}

{% endblock content %}

{% block scripts %}
{% if user.is_authenticated %}
<script src="{% static 'processos/js/buscaDoencas.js' %}"></script>
<script src="{% static 'processos/js/buscaPacientes.js' %}"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.16/jquery.mask.min.js" integrity="sha256-Kg2zTcFO9LXOc7IwcBx1YeUBJmekycsnTsq2RuFHSZU=" crossorigin="anonymous"></script>
<script src="{% static 'processos/js/mascaras.js' %}"></script>
{% endif %}
{% endblock %}