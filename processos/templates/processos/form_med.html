{% load crispy_forms_tags %}
{% load static %}

<style>
/* Enhanced medication tabs styling */
#medicamentos-tab {
    background: #ffffff;
    border-radius: 0.5rem;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    padding: 1rem;
    margin-bottom: 1rem;
}

#medicamentos-tab .nav-link {
    border: 1px solid #dee2e6;
    border-radius: 0.375rem;
    margin-bottom: 0.5rem;
    padding: 0.75rem 1rem;
    color: #495057;
    font-weight: 500;
    transition: all 0.15s ease-in-out;
}

#medicamentos-tab .nav-link:hover {
    background-color: #f8f9fa;
    border-color: #007bff;
    color: #007bff;
    transform: translateY(-1px);
    box-shadow: 0 2px 4px rgba(0,123,255,0.1);
}

#medicamentos-tab .nav-link.active {
    background-color: #007bff;
    border-color: #007bff;
    color: #ffffff;
    box-shadow: 0 2px 8px rgba(0,123,255,0.3);
}

#medicamentos-tab .remove-med {
    opacity: 0.7;
    transition: all 0.15s ease-in-out;
}

#medicamentos-tab .remove-med:hover {
    opacity: 1;
    transform: scale(1.1);
}

#add-med {
    background: linear-gradient(135deg, #28a745, #20c997);
    color: white;
    border: none;
    font-weight: 600;
}

#add-med:hover {
    background: linear-gradient(135deg, #1e7e34, #1abc9c);
    color: white;
    transform: translateY(-1px);
    box-shadow: 0 4px 8px rgba(40,167,69,0.3);
}

/* Enhanced medication content styling */
.medication-card {
    background: #ffffff;
    border-radius: 0.75rem;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    overflow: hidden;
    transition: box-shadow 0.15s ease-in-out;
}

.medication-card:hover {
    box-shadow: 0 8px 16px rgba(0,0,0,0.15);
}

.medication-header {
    background: linear-gradient(135deg, #007bff, #0056b3);
    color: white;
    padding: 1rem 1.5rem;
    font-weight: 600;
    font-size: 1.1rem;
}

.medication-body {
    padding: 1.5rem;
}

.month-section {
    background: linear-gradient(135deg, #f8f9fa, #e9ecef);
    border: 1px solid #dee2e6;
    border-radius: 0.5rem;
    margin-bottom: 1rem;
    overflow: hidden;
    transition: all 0.15s ease-in-out;
}

.month-section:hover {
    border-color: #007bff;
    box-shadow: 0 2px 4px rgba(0,123,255,0.1);
}

.month-label {
    background: linear-gradient(135deg, #343a40, #495057);
    color: white;
    padding: 0.75rem 1rem;
    font-weight: 600;
    font-size: 0.9rem;
    border-bottom: 1px solid #dee2e6;
}

.month-content {
    padding: 1rem;
}

</style>

        <div class="section-card">
          <div class="section-header">
            <span class="oi oi-medical-cross mr-2"></span>
            Medicamentos
          </div>
          <div class="section-body">
            
            <div class="row">
                <div class="col-lg-3 col-md-4">
                    <div class="nav flex-column nav-pills" id="medicamentos-tab">
                        <h6 class="text-muted mb-3">Selecionar Medicamento</h6>
                        
                        <div class="d-flex justify-content-between align-items-center mb-2">
                            <a class="nav-link active flex-grow-1" id="medicamento-1-tab" data-toggle="pill" href="#medicamento-1">
                                <span class="oi oi-pill mr-2"></span>Medicamento #1
                            </a>
                        </div>
                        
                        <div class="d-flex justify-content-between align-items-center mb-2">
                            <a class="nav-link {{ med2_mostrar }} flex-grow-1" id="medicamento-2-tab" data-toggle="pill" href="#medicamento-2">
                                <span class="oi oi-pill mr-2"></span>Medicamento #2
                            </a>
                            <button type="button" class="btn btn-sm btn-outline-danger remove-med {{ med2_mostrar }} ml-2" data-med="2" title="Remover medicamento">
                                <span class="oi oi-trash" aria-hidden="true"></span>
                            </button>
                        </div>
                        
                        <div class="d-flex justify-content-between align-items-center mb-2">
                            <a class="nav-link {{ med3_mostrar }} flex-grow-1" id="medicamento-3-tab" data-toggle="pill" href="#medicamento-3">
                                <span class="oi oi-pill mr-2"></span>Medicamento #3
                            </a>
                            <button type="button" class="btn btn-sm btn-outline-danger remove-med {{ med3_mostrar }} ml-2" data-med="3" title="Remover medicamento">
                                <span class="oi oi-trash" aria-hidden="true"></span>
                            </button>
                        </div>
                        
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <a class="nav-link {{ med4_mostrar }} flex-grow-1" id="medicamento-4-tab" data-toggle="pill" href="#medicamento-4">
                                <span class="oi oi-pill mr-2"></span>Medicamento #4
                            </a>
                            <button type="button" class="btn btn-sm btn-outline-danger remove-med {{ med4_mostrar }} ml-2" data-med="4" title="Remover medicamento">
                                <span class="oi oi-trash" aria-hidden="true"></span>
                            </button>
                        </div>
                        
                        <hr class="my-3">
                        
                        <a class="nav-link" href="" id="add-med">
                            <span class="oi oi-plus mr-2" title="Adicionar medicamento" aria-hidden="true"></span>
                            Adicionar Medicamento
                        </a>
                    </div>
                </div>
                
                <div class="col-lg-9 col-md-8">
                    <div class="tab-content" id="medicamentos">
                        
                        <!-- Medicamento 1 -->
                        <div class="tab-pane fade medication-card active show" id="medicamento-1">
                            <div class="medication-header">
                                <span class="oi oi-pill mr-2"></span>
                                Medicamento #1
                                <small class="ml-2">(Obrigatório)</small>
                            </div>
                            <div class="medication-body">
                                <div class="row mb-4">
                                    <div class="col-md-8">{{ formulario.id_med1|as_crispy_field }}</div>
                                    <div class="col-md-4">{{ formulario.med1_repetir_posologia|as_crispy_field }}</div>
                                </div>
                                <div class="row mb-4">
                                    <div class="col-md-12">{{ formulario.med1_via|as_crispy_field }}</div>
                                </div>
                                
                                <h6 class="text-muted mb-3">
                                    <span class="oi oi-calendar mr-2"></span>
                                    Posologia por Mês
                                </h6>
                                
                                <div class="month-section" id="med1-mes1">
                                    <div class="month-label">1º mês</div>
                                    <div class="month-content">
                                        <div class="row">
                                            <div class="col-md-8">{{ formulario.med1_posologia_mes1|as_crispy_field }}</div>
                                            <div class="col-md-4">{{ formulario.qtd_med1_mes1|as_crispy_field }}</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Posologias opcionais (meses 2-6) -->
                                <div class="d-none" id="posologias-opcionais-med1">                    
                                    <div class="month-section" id="med1-mes2">
                                        <div class="month-label">2º mês</div>
                                        <div class="month-content">
                                            <div class="row">
                                                <div class="col-md-8">{{ formulario.med1_posologia_mes2|as_crispy_field }}</div>
                                                <div class="col-md-4">{{ formulario.qtd_med1_mes2|as_crispy_field }}</div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="month-section" id="med1-mes3">
                                        <div class="month-label">3º mês</div>
                                        <div class="month-content">
                                            <div class="row">
                                                <div class="col-md-8">{{ formulario.med1_posologia_mes3|as_crispy_field }}</div>
                                                <div class="col-md-4">{{ formulario.qtd_med1_mes3|as_crispy_field }}</div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="month-section" id="med1-mes4">
                                        <div class="month-label">4º mês</div>
                                        <div class="month-content">
                                            <div class="row">
                                                <div class="col-md-8">{{ formulario.med1_posologia_mes4|as_crispy_field }}</div>
                                                <div class="col-md-4">{{ formulario.qtd_med1_mes4|as_crispy_field }}</div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="month-section" id="med1-mes5">
                                        <div class="month-label">5º mês</div>
                                        <div class="month-content">
                                            <div class="row">
                                                <div class="col-md-8">{{ formulario.med1_posologia_mes5|as_crispy_field }}</div>
                                                <div class="col-md-4">{{ formulario.qtd_med1_mes5|as_crispy_field }}</div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="month-section" id="med1-mes6">
                                        <div class="month-label">6º mês</div>
                                        <div class="month-content">
                                            <div class="row">
                                                <div class="col-md-8">{{ formulario.med1_posologia_mes6|as_crispy_field }}</div>
                                                <div class="col-md-4">{{ formulario.qtd_med1_mes6|as_crispy_field }}</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Medicamento 2 -->
                        <div class="tab-pane fade medication-card" id="medicamento-2">
                            <div class="medication-header">
                                <span class="oi oi-pill mr-2"></span>
                                Medicamento #2
                                <small class="ml-2">(Opcional)</small>
                            </div>
                            <div class="medication-body">
                                <div class="row mb-4">
                                    <div class="col-md-8">{{ formulario.id_med2|as_crispy_field }}</div>
                                    <div class="col-md-4">{{ formulario.med2_repetir_posologia|as_crispy_field }}</div>
                                </div>
                                
                                <h6 class="text-muted mb-3">
                                    <span class="oi oi-calendar mr-2"></span>
                                    Posologia por Mês
                                </h6>
                                
                                <div class="month-section" id="med2-mes1">
                                    <div class="month-label">1º mês</div>
                                    <div class="month-content">
                                        <div class="row">
                                            <div class="col-md-8">{{ formulario.med2_posologia_mes1|as_crispy_field }}</div>
                                            <div class="col-md-4">{{ formulario.qtd_med2_mes1|as_crispy_field }}</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Posologias opcionais (meses 2-6) -->
                                <div class="d-none" id="posologias-opcionais-med2"> 
                                    <div class="month-section" id="med2-mes2">
                                        <div class="month-label">2º mês</div>
                                        <div class="month-content">
                                            <div class="row">
                                                <div class="col-md-8">{{ formulario.med2_posologia_mes2|as_crispy_field }}</div>
                                                <div class="col-md-4">{{ formulario.qtd_med2_mes2|as_crispy_field }}</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="month-section" id="med2-mes3">
                                        <div class="month-label">3º mês</div>
                                        <div class="month-content">
                                            <div class="row">
                                                <div class="col-md-8">{{ formulario.med2_posologia_mes3|as_crispy_field }}</div>
                                                <div class="col-md-4">{{ formulario.qtd_med2_mes3|as_crispy_field }}</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="month-section" id="med2-mes4">
                                        <div class="month-label">4º mês</div>
                                        <div class="month-content">
                                            <div class="row">
                                                <div class="col-md-8">{{ formulario.med2_posologia_mes4|as_crispy_field }}</div>
                                                <div class="col-md-4">{{ formulario.qtd_med2_mes4|as_crispy_field }}</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="month-section" id="med2-mes5">
                                        <div class="month-label">5º mês</div>
                                        <div class="month-content">
                                            <div class="row">
                                                <div class="col-md-8">{{ formulario.med2_posologia_mes5|as_crispy_field }}</div>
                                                <div class="col-md-4">{{ formulario.qtd_med2_mes5|as_crispy_field }}</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="month-section" id="med2-mes6">
                                        <div class="month-label">6º mês</div>
                                        <div class="month-content">
                                            <div class="row">
                                                <div class="col-md-8">{{ formulario.med2_posologia_mes6|as_crispy_field }}</div>
                                                <div class="col-md-4">{{ formulario.qtd_med2_mes6|as_crispy_field }}</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Medicamento 3 -->
                        <div class="tab-pane fade medication-card" id="medicamento-3">
                            <div class="medication-header">
                                <span class="oi oi-pill mr-2"></span>
                                Medicamento #3
                                <small class="ml-2">(Opcional)</small>
                            </div>
                            <div class="medication-body">
                                <div class="row mb-4">
                                    <div class="col-md-8">{{ formulario.id_med3|as_crispy_field }}</div>
                                    <div class="col-md-4">{{ formulario.med3_repetir_posologia|as_crispy_field }}</div>
                                </div>
                                
                                <h6 class="text-muted mb-3">
                                    <span class="oi oi-calendar mr-2"></span>
                                    Posologia por Mês
                                </h6>
                                
                                <div class="month-section" id="med3-mes1">
                                    <div class="month-label">1º mês</div>
                                    <div class="month-content">
                                        <div class="row">
                                            <div class="col-md-8">{{ formulario.med3_posologia_mes1|as_crispy_field }}</div>
                                            <div class="col-md-4">{{ formulario.qtd_med3_mes1|as_crispy_field }}</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Posologias opcionais (meses 2-6) -->
                                <div class="d-none" id="posologias-opcionais-med3">                 
                                    <div class="month-section" id="med3-mes2">
                                        <div class="month-label">2º mês</div>
                                        <div class="month-content">
                                            <div class="row">
                                                <div class="col-md-8">{{ formulario.med3_posologia_mes2|as_crispy_field }}</div>
                                                <div class="col-md-4">{{ formulario.qtd_med3_mes2|as_crispy_field }}</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="month-section" id="med3-mes3">
                                        <div class="month-label">3º mês</div>
                                        <div class="month-content">
                                            <div class="row">
                                                <div class="col-md-8">{{ formulario.med3_posologia_mes3|as_crispy_field }}</div>
                                                <div class="col-md-4">{{ formulario.qtd_med3_mes3|as_crispy_field }}</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="month-section" id="med3-mes4">
                                        <div class="month-label">4º mês</div>
                                        <div class="month-content">
                                            <div class="row">
                                                <div class="col-md-8">{{ formulario.med3_posologia_mes4|as_crispy_field }}</div>
                                                <div class="col-md-4">{{ formulario.qtd_med3_mes4|as_crispy_field }}</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="month-section" id="med3-mes5">
                                        <div class="month-label">5º mês</div>
                                        <div class="month-content">
                                            <div class="row">
                                                <div class="col-md-8">{{ formulario.med3_posologia_mes5|as_crispy_field }}</div>
                                                <div class="col-md-4">{{ formulario.qtd_med3_mes5|as_crispy_field }}</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="month-section" id="med3-mes6">
                                        <div class="month-label">6º mês</div>
                                        <div class="month-content">
                                            <div class="row">
                                                <div class="col-md-8">{{ formulario.med3_posologia_mes6|as_crispy_field }}</div>
                                                <div class="col-md-4">{{ formulario.qtd_med3_mes6|as_crispy_field }}</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Medicamento 4 -->
                        <div class="tab-pane fade medication-card" id="medicamento-4">
                            <div class="medication-header">
                                <span class="oi oi-pill mr-2"></span>
                                Medicamento #4
                                <small class="ml-2">(Opcional)</small>
                            </div>
                            <div class="medication-body">
                                <div class="row mb-4">
                                    <div class="col-md-8">{{ formulario.id_med4|as_crispy_field }}</div>
                                    <div class="col-md-4">{{ formulario.med4_repetir_posologia|as_crispy_field }}</div>
                                </div>
                                
                                <h6 class="text-muted mb-3">
                                    <span class="oi oi-calendar mr-2"></span>
                                    Posologia por Mês
                                </h6>
                                
                                <div class="month-section" id="med4-mes1">
                                    <div class="month-label">1º mês</div>
                                    <div class="month-content">
                                        <div class="row">
                                            <div class="col-md-8">{{ formulario.med4_posologia_mes1|as_crispy_field }}</div>
                                            <div class="col-md-4">{{ formulario.qtd_med4_mes1|as_crispy_field }}</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Posologias opcionais (meses 2-6) -->
                                <div class="d-none" id="posologias-opcionais-med4">   
                                    <div class="month-section" id="med4-mes2">
                                        <div class="month-label">2º mês</div>
                                        <div class="month-content">
                                            <div class="row">
                                                <div class="col-md-8">{{ formulario.med4_posologia_mes2|as_crispy_field }}</div>
                                                <div class="col-md-4">{{ formulario.qtd_med4_mes2|as_crispy_field }}</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="month-section" id="med4-mes3">
                                        <div class="month-label">3º mês</div>
                                        <div class="month-content">
                                            <div class="row">
                                                <div class="col-md-8">{{ formulario.med4_posologia_mes3|as_crispy_field }}</div>
                                                <div class="col-md-4">{{ formulario.qtd_med4_mes3|as_crispy_field }}</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="month-section" id="med4-mes4">
                                        <div class="month-label">4º mês</div>
                                        <div class="month-content">
                                            <div class="row">
                                                <div class="col-md-8">{{ formulario.med4_posologia_mes4|as_crispy_field }}</div>
                                                <div class="col-md-4">{{ formulario.qtd_med4_mes4|as_crispy_field }}</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="month-section" id="med4-mes5">
                                        <div class="month-label">5º mês</div>
                                        <div class="month-content">
                                            <div class="row">
                                                <div class="col-md-8">{{ formulario.med4_posologia_mes5|as_crispy_field }}</div>
                                                <div class="col-md-4">{{ formulario.qtd_med4_mes5|as_crispy_field }}</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="month-section" id="med4-mes6">
                                        <div class="month-label">6º mês</div>
                                        <div class="month-content">
                                            <div class="row">
                                                <div class="col-md-8">{{ formulario.med4_posologia_mes6|as_crispy_field }}</div>
                                                <div class="col-md-4">{{ formulario.qtd_med4_mes6|as_crispy_field }}</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                    </div>
                </div>
            </div>
          </div>
        </div>
            
            <!-- Fim Medicamentos -->